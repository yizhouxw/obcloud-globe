<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OB Cloud 全球地域分布</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Three.js for 3D Globe -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- 高德地图配置 -->
    <script src="config.js"></script>
    <!-- js-yaml for YAML parsing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1 data-i18n="app_title">OB Cloud 全球地域分布</h1>
            <div class="header-controls">
                <div class="lang-selector" style="margin-right: 1rem;">
                    <select id="languageSelect" class="filter-select" aria-label="Select Language">
                        <option value="zh">中文</option>
                        <option value="en">English</option>
                        <option value="ja">日本語</option>
                    </select>
                </div>
                <nav class="view-mode-selector">
                    <button class="view-mode-btn active" data-mode="globe" title="3D 地球视图">
                        <span>🌍</span> <span data-i18n="view_globe">Globe</span>
                    </button>
                    <button class="view-mode-btn" data-mode="map" title="平铺地图视图">
                        <span>🗺️</span> <span data-i18n="view_map">Map</span>
                    </button>
                    <button class="view-mode-btn" data-mode="table" title="列表视图">
                        <span>📋</span> <span data-i18n="view_table">Table</span>
                    </button>
                </nav>
                <div class="filters">
                    <select id="siteFilter" class="filter-select" aria-label="Filter by Site">
                        <option value="" data-i18n="filter_all_sites">所有站点</option>
                    </select>
                    <select id="cloudProviderFilter" class="filter-select" aria-label="Filter by Cloud Provider">
                        <option value="" data-i18n="filter_all_providers">所有云厂商</option>
                    </select>
                    <select id="channelFilter" class="filter-select" aria-label="Filter by Channel">
                        <option value="" data-i18n="filter_all_channels">所有渠道</option>
                    </select>
                    <input type="text" id="regionFilter" class="filter-input" list="regionOptions" placeholder="搜索区域..." aria-label="Search Region" data-i18n="search_placeholder">
                    <datalist id="regionOptions">
                    </datalist>
                </div>
            </div>
        </header>

        <main>
            <div class="main-content">
                <!-- Globe View -->
                <div id="globe-view" class="view-container active">
                    <div id="globe-canvas"></div>
                    <div id="globe-loading" class="globe-loading">
                        <div class="loading-spinner"></div>
                        <div class="loading-text" data-i18n="loading_map">地图资源加载中...</div>
                    </div>
                    <div class="legend" id="globe-legend">
                        <div class="legend-title" data-i18n="legend_cloud_provider">云厂商</div>
                    </div>
                </div>

                <!-- Map View -->
                <div id="map-view" class="view-container">
                    <div id="map"></div>
                </div>

                <!-- Table View -->
                <div id="table-view" class="view-container">
                    <div class="table-container">
                        <div class="table-header-wrapper">
                            <table id="regions-table-header" class="table-header">
                                <thead>
                                    <tr>
                                        <th data-i18n="table_provider">云厂商</th>
                                        <th data-i18n="table_region">地域</th>
                                        <th data-i18n="table_code">地域代码</th>
                                        <th data-i18n="table_az">可用区数量</th>
                                        <th data-i18n="table_date">开服日期</th>
                                        <th data-i18n="table_channels">支持的渠道</th>
                                        <th data-i18n="table_sites">支持的站点</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <div class="table-body-wrapper">
                            <table id="regions-table" class="table-body">
                                <tbody id="regions-table-body">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Region Info Sidebar -->
            <aside id="region-info-sidebar" class="info-sidebar">
                <div class="sidebar-header">
                    <h2 data-i18n="sidebar_title">地域信息</h2>
                </div>
                <div id="region-info-content" class="sidebar-content">
                    <div class="empty-state">
                        <p data-i18n="sidebar_empty">点击地图上的标记点查看地域详细信息</p>
                    </div>
                </div>
            </aside>

            <!-- Overlapping Markers Popup -->
            <div id="overlapping-markers-popup" class="overlapping-popup hidden" role="dialog" aria-labelledby="popup-title">
                <div class="popup-header">
                    <h3 id="popup-title" data-i18n="popup_title">选择地域</h3>
                    <button class="popup-close-btn" id="close-overlapping-popup" aria-label="Close popup">×</button>
                </div>
                <div class="popup-content" id="overlapping-markers-list">
                </div>
            </div>
        </main>
    </div>

    <script src="translations.js"></script>
    <script src="app.js"></script>
</body>
</html>

