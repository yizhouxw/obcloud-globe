<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OB Cloud 全球地域分布</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Three.js for 3D Globe -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- 高德地图配置 -->
    <script src="config.js"></script>
    <!-- Globe Implementations -->
    <script src="src/globe-impl.js"></script>
    <!-- js-yaml for YAML parsing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div id="notice-banner" class="notice-banner" role="status" aria-live="polite">
                <span class="banner-icon" aria-hidden="true">ℹ️</span>
                <div class="banner-text">
                    <span data-i18n="site_disclaimer_prefix">本站点非 OceanBase 官方站点，通过开源社区维护，站长会尽力保证，但是不确保数据完整准确，您可以通过 </span>
                    <a href="https://github.com/yizhouxw/obcloud-globe/issues" target="_blank" rel="noopener noreferrer" data-i18n="site_disclaimer_link">GitHub issues</a>
                    <span data-i18n="site_disclaimer_suffix"> 反馈问题</span>
                </div>
                <button id="notice-banner-close" class="notice-close-btn" type="button" aria-label="Close notice" data-i18n-title="notice_close" onclick="dismissNoticeBanner()">×</button>
            </div>
            <div class="header-title-row">
                <h1 data-i18n="app_title">OB Cloud 全球地域分布</h1>
                <a href="https://github.com/yizhouxw/obcloud-globe" target="_blank" class="github-link" aria-label="View on GitHub">
                    <svg height="24" aria-hidden="true" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true" class="octicon octicon-mark-github">
                        <path d="M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.46-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z" fill="currentColor"></path>
                    </svg>
                </a>
            </div>
            <div class="header-controls">
                <div class="lang-selector" style="margin-right: 1rem;">
                    <select id="languageSelect" class="filter-select" aria-label="Select Language">
                        <option value="zh">中文</option>
                        <option value="en">English</option>
                        <option value="ja">日本語</option>
                    </select>
                </div>
                <nav class="view-mode-selector">
                    <button class="view-mode-btn active" data-mode="globe" data-i18n-title="view_globe_title">
                        <span>🌍</span> <span data-i18n="view_globe">地球</span>
                    </button>
                    <button class="view-mode-btn" data-mode="map" data-i18n-title="view_map_title">
                        <span>🗺️</span> <span data-i18n="view_map">地图</span>
                    </button>
                    <button class="view-mode-btn" data-mode="table" data-i18n-title="view_table_title">
                        <span>📋</span> <span data-i18n="view_table">列表</span>
                    </button>
                </nav>
                <div class="filters">
                    <select id="siteFilter" class="filter-select" aria-label="Filter by Site">
                        <option value="" data-i18n="filter_all_sites">所有站点</option>
                    </select>
                    <select id="cloudProviderFilter" class="filter-select" aria-label="Filter by Cloud Provider">
                        <option value="" data-i18n="filter_all_providers">所有云厂商</option>
                    </select>
                    <select id="channelFilter" class="filter-select" aria-label="Filter by Channel">
                        <option value="" data-i18n="filter_all_channels">所有渠道</option>
                    </select>
                    <input type="text" id="regionFilter" class="filter-input" list="regionOptions" placeholder="搜索区域..." aria-label="Search Region" data-i18n="search_placeholder">
                    <datalist id="regionOptions">
                    </datalist>
                </div>
            </div>
        </header>

        <main>
            <div class="main-content">
                <!-- Globe View -->
                <div id="globe-view" class="view-container active">
                    <div id="globe-canvas"></div>
                    <div class="globe-overlay-control">
                        <select id="globeStyleSelect" class="globe-style-select" aria-label="Select Globe Style">
                            <option value="classic">Classic</option>
                            <option value="github">GitHub</option>
                        </select>
                    </div>
                    <div id="globe-loading" class="globe-loading">
                        <div class="loading-spinner"></div>
                        <div class="loading-text" data-i18n="loading_map">地图资源加载中...</div>
                    </div>
                    <div class="legend" id="globe-legend">
                        <div class="legend-title" data-i18n="legend_cloud_provider">云厂商</div>
                    </div>
                </div>

                <!-- Map View -->
                <div id="map-view" class="view-container">
                    <div id="map"></div>
                </div>

                <!-- Table View -->
                <div id="table-view" class="view-container">
                    <div class="table-container">
                        <div class="table-header-wrapper">
                            <table id="regions-table-header" class="table-header">
                                <thead>
                                    <tr>
                                        <th data-i18n="table_provider">云厂商</th>
                                        <th data-i18n="table_region">地域</th>
                                        <th data-i18n="table_code">地域代码</th>
                                        <th data-i18n="table_az">可用区数量</th>
                                        <th data-i18n="table_az_list">可用区列表</th>
                                        <th data-i18n="table_date">开服日期</th>
                                        <th data-i18n="table_channels">支持的渠道</th>
                                        <th data-i18n="table_sites">支持的站点</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <div class="table-body-wrapper">
                            <table id="regions-table" class="table-body">
                                <tbody id="regions-table-body">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Region Info Sidebar -->
            <aside id="region-info-sidebar" class="info-sidebar">
                <div class="sidebar-header">
                    <h2 data-i18n="sidebar_title">地域信息</h2>
                </div>
                <div id="region-info-content" class="sidebar-content">
                    <div class="empty-state">
                        <p data-i18n="sidebar_empty">点击地图上的标记点查看地域详细信息</p>
                    </div>
                </div>
            </aside>

            <!-- Overlapping Markers Popup -->
            <div id="overlapping-markers-popup" class="overlapping-popup hidden" role="dialog" aria-labelledby="popup-title">
                <div class="popup-header">
                    <h3 id="popup-title" data-i18n="popup_title">选择地域</h3>
                    <button class="popup-close-btn" id="close-overlapping-popup" aria-label="Close popup">×</button>
                </div>
                <div class="popup-content" id="overlapping-markers-list">
                </div>
            </div>

            <!-- Mobile Region Info Modal -->
            <div id="region-modal" class="region-modal hidden" role="dialog" aria-labelledby="region-modal-title">
                <div class="region-modal-backdrop" id="region-modal-backdrop"></div>
                <div class="region-modal-content">
                    <div class="region-modal-header">
                        <h3 id="region-modal-title" data-i18n="sidebar_title">地域信息</h3>
                        <button id="region-modal-close" class="region-modal-close" aria-label="Close region info">×</button>
                    </div>
                    <div id="region-modal-body" class="region-modal-body">
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="src/translations.js"></script>
    <script src="src/app.js"></script>
</body>
</html>

